<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–ö–æ—Ç –¥–Ω—è ‚Äî –°–ª—É—á–∞–π–Ω—ã–π –ø—É—à–∏—Å—Ç–∏–∫</title>
  <style>
    body{margin:0;font-family:Arial, sans-serif;background:#0f1724;color:#fff;display:flex;align-items:center;justify-content:center;min-height:100vh}
    .wrap{max-width:800px;width:100%;padding:20px;text-align:center}
    img{max-width:100%;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,0.3)}
    button{cursor:pointer;margin:10px;padding:10px 20px;border:none;border-radius:8px;background:#f6a821;color:#000;font-weight:bold}
    .counter{margin-top:10px;color:#ccc}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>–ö–æ—Ç –¥–Ω—è üê±</h1>
    <p>–°–º–µ—à–Ω—ã–µ –∫–æ—Ç—ã –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å ‚Äî –∂–º–∏ ¬´–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë –∫–æ—Ç–∞¬ª!</p>
    <div id="photo">
      <img id="catImg" alt="–ö–æ—Ç –¥–Ω—è" src="">
    </div>
    <div class="caption" id="caption">–ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ—Ç–∞...</div>
    <button id="nextBtn">–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë –∫–æ—Ç–∞</button>
    <div class="counter" id="counter">–ö–æ—Ç–æ–≤ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ: 0</div>
  </div>

  <script>
    const capStart = [
      '–Ø –Ω–µ –ª–µ–Ω—é—Å—å, —è —ç–∫–æ–Ω–æ–º–ª—é —ç–Ω–µ—Ä–≥–∏—é',
      '–ü–æ—á—Ç–∏ –ø—Ä–æ—Å–Ω—É–ª—Å—è, –Ω–æ –ø–æ–¥—É–º–∞–ª ‚Äî –Ω–µ—Ç',
      '–ù–µ —Ç—Ä–æ–≥–∞–π –º–µ–Ω—è, —ç—Ç–æ –º–æ—ë —Å–æ–ª–Ω—Ü–µ',
      '–Ø —Å–ª—ã—à–∞–ª —Å–ª–æ–≤–æ ¬´–µ–¥–∞¬ª –∏ –ø–æ—Ç–µ—Ä—è–ª –ø–∞–º—è—Ç—å',
      '–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –ª–µ–∂–∞–Ω–∏—é –∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—é'
    ];
    const capMiddle = [
      '–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª –∑–∞–≤–æ–µ–≤–∞—Ç—å –¥–∏–≤–∞–Ω',
      '–≤–µ–¥—ë—Ç –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã —Å —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–æ–º',
      '–ø–∏—Å–∞–ª –º–µ–º—É–∞—Ä—ã, –Ω–æ –∑–∞–±—ã–ª –∑–∞–≥–æ–ª–æ–≤–æ–∫',
      '–ø—Ä–æ–≤–æ–¥–∏—Ç –∏–Ω—Å–ø–µ–∫—Ü–∏—é –º—è–≥–∫–æ—Å—Ç–∏ –ø–æ–¥—É—à–∫–∏',
      '—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª –∑–∞–∫–æ–Ω –ø—Ä–∏—Ç—è–∂–µ–Ω–∏—è –∫ –ø–æ–¥—É—à–∫–µ'
    ];
    const capEnd = [
      '‚Äî –∏ —ç—Ç–æ —Å–µ—Ä—å—ë–∑–Ω–æ.',
      '...–ø–æ—Ç–æ–º—É —á—Ç–æ —è —Ö—É–¥–æ–∂–Ω–∏–∫ —Å–Ω–∞.',
      '‚Äî –¥–∏–ø–ª–æ–º –ø–æ –ª–µ–Ω–∏–≤–æ–≤–µ–¥–µ–Ω–∏—é –ø–æ–ª—É—á–µ–Ω.',
      '‚Äî —Ç–∏—Ö–æ, –∏–¥—ë—Ç –≤–∞–∂–Ω—ã–π –æ—Ç–¥—ã—Ö.',
      '‚Äî –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–∏–Ω–µ—Å–∏—Ç–µ –∑–∞–∫—É—Å–∫—É.'
    ];

    const STORAGE_KEY = 'kotdnya_seen_count';
    let cats = [];
    let index = 0;

    function getSeen(){return parseInt(localStorage.getItem(STORAGE_KEY) || '0', 10)}
    function setSeen(v){localStorage.setItem(STORAGE_KEY, String(v));}
    function updateCounter(){document.getElementById('counter').textContent = `–ö–æ—Ç–æ–≤ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ: ${getSeen()}`}

    function randomCaption(){
      const s = capStart[Math.floor(Math.random()*capStart.length)];
      const m = capMiddle[Math.floor(Math.random()*capMiddle.length)];
      const e = capEnd[Math.floor(Math.random()*capEnd.length)];
      return `${s} ${m} ${e}`;
    }

    async function loadCats(){
      try {
        const res = await fetch('https://api.thecatapi.com/v1/images/search?limit=20');
        cats = await res.json();
        index = 0;
        showCat();
      } catch(e){
        document.getElementById('caption').textContent = '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ—Ç–∞ üòø';
      }
    }

    function showCat(){
      if (index >= cats.length) {
        loadCats();
        return;
      }
      const cat = cats[index];
      document.getElementById('catImg').src = cat.url;
      document.getElementById('caption').textContent = randomCaption();
      setSeen(getSeen() + 1);
      updateCounter();
      index++;
    }

    document.getElementById('nextBtn').addEventListener('click', showCat);

    updateCounter();
    loadCats();
  </script>
</body>
</html>
