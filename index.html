<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Кот дня — Случайный пушистик</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#f6a821;--muted:#9aa8b2}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;background:linear-gradient(180deg,#071226, #0f1724);color:#e6eef6;display:flex;align-items:center;justify-content:center;min-height:100vh}
    .wrap{width:min(960px,96vw);padding:28px}
    header{display:flex;gap:16px;align-items:center;margin-bottom:18px}
    .logo{width:64px;height:64px;border-radius:14px;background:linear-gradient(135deg,#21395a,#2b4a73);display:flex;align-items:center;justify-content:center;font-weight:700;color:white;box-shadow:0 6px 18px rgba(2,6,23,.6)}
    h1{font-size:20px;margin:0}
    p.lead{margin:0;color:var(--muted)}

    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:16px;padding:18px;box-shadow:0 6px 30px rgba(3,8,20,.6)}
    .cat-area{display:grid;grid-template-columns:1fr 320px;gap:18px;align-items:start}
    .photo{background:#061021;border-radius:12px;padding:12px;display:flex;align-items:center;justify-content:center;min-height:320px}
    .photo img{max-width:100%;max-height:76vh;border-radius:10px;display:block}
    aside{padding:6px}
    .caption{font-size:18px;margin:8px 0;color:#fff}
    .meta{color:var(--muted);font-size:14px}
    button{cursor:pointer;border:0;padding:12px 16px;border-radius:10px;font-weight:600}
    .btn-primary{background:var(--accent);color:#071021}
    .btn-ghost{background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,.04)}
    .controls{display:flex;gap:8px;margin-top:12px}
    .counter{margin-top:12px;color:var(--muted);font-size:14px}
    footer{margin-top:14px;color:var(--muted);font-size:13px}

    @media (max-width:820px){.cat-area{grid-template-columns:1fr;}.logo{width:52px;height:52px}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">Кот</div>
      <div>
        <h1>Кот дня</h1>
        <p class="lead">Смешные коты на каждый день — жми «Показать ещё кота» и подсчитывай просмотренные пушистики.</p>
      </div>
    </header>

    <div class="card">
      <div class="cat-area">
        <div class="photo" id="photo">
          <img id="catImg" alt="Кот дня" src="" loading="lazy">
        </div>
        <aside>
          <div class="caption" id="caption">Загружаем кота...</div>
          <div class="meta" id="meta">Уникальных котов в наборе: 1000</div>

          <div class="controls">
            <button id="nextBtn" class="btn-primary">Показать ещё кота</button>
            <button id="randomBtn" class="btn-ghost">Случайный из 1000</button>
          </div>

          <div class="counter" id="counter">Котов просмотрено: 0</div>

          <hr style="margin:12px 0;border:none;border-top:1px solid rgba(255,255,255,.03)">
          <div style="font-size:13px;color:var(--muted)">Подписи генерируются автоматически — 1000 смешных строк. Изображения — генераторы котов (placekitten), чтобы сайт был лёгким и полностью автономным.</div>
        </aside>
      </div>

      <footer>Если хочешь — я помогу выложить этот файл на GitHub Pages и дать ссылку.</footer>
    </div>
  </div>

  <script>
    // --- Настройка набора картинок (1000 уникальных URL) ---
    const TOTAL = 1000;
    const imageUrls = Array.from({length: TOTAL}, (_, i) => {
      // Вариируем размеры, чтобы placekitten отдавал разные картинки
      const w = 420 + (i % 250); // 420..669
      const h = 300 + ((i * 37) % 200); // 300..499
      return `https://placekitten.com/${w}/${h}`;
    });

    // --- Генерация 1000 смешных подписей программно ---
    const starts = [
      'Я не ленюсь, я экономлю энергию',
      'Почти проснулся, но подумал — нет',
      'Я тренировался для миссии «лёжа»',
      'Коты идут на подъём — но позже',
      'Не трогай меня, это моё солнце',
      'Я слышал слово «еда» и потерял память',
      'Серьёзный кот. Носит серьёзные усики',
      'Если хорошо помыться, то завтра — снова сон',
      'Я патентую новую позу: "свернуто-в-гармошку"',
      'Эксперт по лежанию и наблюдению'
    ];
    const middles = [
      'считал мышей, но слишком устал',
      'планировал завоевать диван',
      'проверял, нет ли внутри коробки вселенной',
      'ведёт переговоры с холодильником',
      'писал мемуары, но забыл заголовок',
      'отриминизировал сон для максимальной пользы',
      'проводит инспекцию мягкости подушки',
      'а потом ещё раз поспит',
      'оставил записку: "вернусь после 5 минут"',
      'тестировал закон притяжения к подушке'
    ];
    const ends = [
      '— и это серьёзно.',
      '...потому что я художник сна.',
      '(свидетельств нет, только мурлыканье)',
      '— диплом по ленивоведению получен.',
      'и если спросят — я не виноват.',
      '— рекомендую всем котам.',
      'и клянусь, я видел белую мышь.',
      '— тихо, идёт важный отдых.',
      'и да, я самый пушистый.',
      '— пожалуйста, принесите закуску.'
    ];

    // deterministic pseudo-random by index
    function captionFor(i){
      const a = starts[i % starts.length];
      const b = middles[(Math.floor(i/3) + i) % middles.length];
      const c = ends[(Math.floor(i/7) + i*3) % ends.length];
      return `${a} ${b} ${c}`;
    }

    // --- State и DOM ---
    const imgEl = document.getElementById('catImg');
    const capEl = document.getElementById('caption');
    const counterEl = document.getElementById('counter');
    const nextBtn = document.getElementById('nextBtn');
    const randomBtn = document.getElementById('randomBtn');

    // Счётчик в localStorage
    const STORAGE_KEY = 'kotdnya_seen_count';
    function getSeen(){return parseInt(localStorage.getItem(STORAGE_KEY) || '0', 10)}
    function setSeen(v){localStorage.setItem(STORAGE_KEY, String(v));}

    function updateCounter(){counterEl.textContent = `Котов просмотрено: ${getSeen()}`}

    // Показать кота по индексу
    function showByIndex(i){
      const idx = ((i % TOTAL) + TOTAL) % TOTAL;
      imgEl.src = imageUrls[idx] + `?rand=${Date.now()%100000}`; // ?rand чтобы избежать кэша на быстрых кликах
      capEl.textContent = captionFor(idx);
      // Инкремент просмотренного счётчика
      setSeen(getSeen() + 1);
      updateCounter();
    }

    // Случайный индекс
    function randomIndex(){
      return Math.floor(Math.random() * TOTAL);
    }

    // Инициализация
    updateCounter();
    // Покажем сначала случайного кота
    showByIndex(randomIndex());

    nextBtn.addEventListener('click', ()=>{
      // Если уже есть src — пытаемся взять следующий уникальный индекс на основе времени
      const current = imageUrls.indexOf(imgEl.src.split('?')[0]);
      const next = (current === -1) ? randomIndex() : (current + 1) % TOTAL;
      showByIndex(next);
    });

    randomBtn.addEventListener('click', ()=> showByIndex(randomIndex()));

    // Клавиша пробел — следующий кот
    window.addEventListener('keydown', (e)=>{ if(e.code==='Space'){ e.preventDefault(); nextBtn.click(); } });

    // Лёгкая предзагрузка следующего изображения
    imgEl.addEventListener('load', ()=>{
      const cur = imageUrls.indexOf(imgEl.src.split('?')[0]);
      const next = (cur + 1) % TOTAL;
      const pre = new Image(); pre.src = imageUrls[next];
    });
  </script>
</body>
</html>
